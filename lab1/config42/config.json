{
    "resource_group": "lab1config4",
    "network_address_prefix": "10.0.0.0/16",
    "network_security_group": [
        {
            "name": "frontendNSG",
            "rule": [
                {
                    "name": "frontendRule",
                    "priority": 1000,
                    "source_address_prefix": "*",
                    "source_port_range": "*",
                    "destination_address_prefix": "*",
                    "destination_port_range": "8080-8081"
                },
                {
                    "name": "frontendSSH",
                    "priority": 1010,
                    "source_address_prefix": "*",
                    "source_port_range": "*",
                    "destination_address_prefix": "*",
                    "destination_port_range": 22
                }
            ]
        },
        {
            "name": "backendNSG",
            "rule": [
                {
                    "name": "backendRule",
                    "priority": 1000,
                    "source_address_prefix": "10.0.0.0/16",
                    "source_port_range": "*",
                    "destination_address_prefix": "*",
                    "destination_port_range": "8080-8081"
                },
                {
                    "name": "backendSSH",
                    "priority": 1010,
                    "source_address_prefix": "*",
                    "source_port_range": "*",
                    "destination_address_prefix": "*",
                    "destination_port_range": 22
                }
            ]
        },
        {
            "name": "databaseNSG",
            "rule": [
                {
                    "name": "databaseRule",
                    "priority": 1000,
                    "source_address_prefix": "10.0.0.0/16",
                    "source_port_range": "*",
                    "destination_address_prefix": "*",
                    "destination_port_range": 3306
                },
                {
                    "name": "databaseSSH",
                    "priority": 1010,
                    "source_address_prefix": "*",
                    "source_port_range": "*",
                    "destination_address_prefix": "*",
                    "destination_port_range": 22
                }
            ]
        }
    ],
    "subnet": [
        {
            "name": "frontendSubnet",
            "address_prefix": "10.0.1.0/24",
            "network_security_group": "frontendNSG"
        },
        {
            "name": "backendSubnet",
            "address_prefix": "10.0.3.0/24",
            "network_security_group": "backendNSG"
        },
        {
            "name": "databaseSubnet",
            "address_prefix": "10.0.4.0/24",
            "network_security_group": "databaseNSG"
        }
    ],
    "public_ip": [
        {
            "name": "front"
        },
        {
            "name": "back"
        },
        {
            "name": "database"
        }
    ],
    "virtual_machine": [
        {
            "name": "databaseMasterVM",
            "subnet": "databaseSubnet",
            "private_ip_address": "10.0.4.8",
            "public_ip_address": "database",
            "deploy": [
                {
                    "type": "database",
                    "port": 3306,
                    "user": "user",
                    "password": "password"
                }
            ]
        },
        {
            "name": "databaseSlaveVM",
            "subnet": "databaseSubnet",
            "private_ip_address": "10.0.4.9",
            "public_ip_address": "",
            "deploy": [
                {
                    "type": "database-slave",
                    "port": 3306,
                    "user": "user",
                    "password": "password",
                    "master_address": "10.0.4.8",
                    "master_port": 3306
                }
            ]
        },
        {
            "name": "backend1VM",
            "subnet": "backendSubnet",
            "private_ip_address": "10.0.3.7",
            "public_ip_address": "back",
            "deploy": [
                {
                    "type": "database",
                    "database_ip_master": "10.0.4.8",
                    "database_port_master": 3306,
                    "database_ip_slave": "10.0.4.9",
                    "database_port_slave": 3306
                }
            ]
        },
        {
            "name": "frontendVM",
            "subnet": "frontendSubnet",
            "private_ip_address": "10.0.1.5",
            "public_ip_address": "front",
            "deploy": [
                {
                    "type": "nginx-balancer",
                    "port": 8080,
                    "server_name": "backend",
                    "backend_port_master": 3306,
                    "backend_port_slave": 3306
                },
                {
                    "type": "frontend",
                    "nginx_port": 8080,
                    "nginx_address": "127.0.0.1"
                }
            ]
        }
    ]
}